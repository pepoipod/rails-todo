!function t(e,a,o){function n(i,r){if(!a[i]){if(!e[i]){var l="function"==typeof require&&require;if(!r&&l)return l(i,!0);if(s)return s(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=a[i]={exports:{}};e[i][0].call(c.exports,function(t){var a=e[i][1][t];return n(a||t)},c,c.exports,t,e,a,o)}return a[i].exports}for(var s="function"==typeof require&&require,i=0;i<o.length;i++)n(o[i]);return n}({1:[function(t,e,a){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}(),s=function(){function t(){o(this,t),this.$ele={taskList:$(".tasks"),categoryList:$(".category-list"),popupMenu:$(".popup-menu"),taskInfo:$(".task-info"),sortData:$(".sort-data")},this.sortData={by:"created_at",order:"desc"},this.editingTitle={task:"",category:""},this.currentMenu="",this.init()}return n(t,[{key:"init",value:function(){this.addEvent()}},{key:"addEvent",value:function(){var t=this;$(".task-info .header input").on({focus:function(e){t.editingTitle.task=$(e.target).val()},blur:function(e){t.updateTaskTitle($(e.target).val())}}),$(".sec-todo-list h1 input").on({focus:function(e){t.editingTitle.category=$(e.target).val()},blur:function(e){t.updateCategoryTitle($(e.target).val())}}),this.$ele.taskList.on("click","li:not(.add-task)",function(e){$(e.target).closest("i").length||t.openTaskInfo($(e.target).closest("li"))}),$(".tasks li:not(.add-task) > div > i").on("click",function(e){t.toggleComplete($(e.target).closest("li"))}),$(".add-task input").on("blur",function(){t.addTask()}),$(".task-info .favorite").on("click",function(){t.toggleFavorite()}),$(".task-info .trash").on("click",function(){t.removeTask()}),$(".category-list li:not(.add-category)").on("click",function(e){t.openCategory($(e.target).closest("li"))}),$(".add-category").on("click",function(){t.addCategory()}),$(".sec-todo-list nav > .sort").on("click",function(){t.openNav(".sort")}),$(".sec-todo-list nav > .other").on("click",function(){t.openNav(".other")}),$(".popup-menu .other .trash").on("click",function(){t.removeCategory()}),$(".popup-menu .sort li").on("click",function(e){t.setSort($(e.target).closest("li"))}),$(".sort-data .type").on("click",function(){t.toggleSortType()}),$(".sort-data .close").on("click",function(){t.disableSort()})}},{key:"openTaskInfo",value:function(t){var e=$(".tasks li.open").get(0);this.closeTaskInfo(),e!==t.get(0)&&(t.toggleClass("open"),t.hasClass("open")?(this.setTaskInfo(t),this.$ele.taskInfo.show()):this.$ele.taskInfo.hide())}},{key:"addTask",value:function(){$(".add-task input").val()&&($(".add-task").before('<li><div><i class="fa-li fa fa-square-o"></i><span>'+$(".add-task input").val()+"</span></div></li>"),$(".add-task input").val(""))}},{key:"removeTask",value:function(){var t=$(".tasks li.open");confirm("「"+t.find("span").text()+"」を削除しますか？")&&(t.remove(),this.$ele.taskInfo.hide())}},{key:"closeTaskInfo",value:function(){$(".tasks li").removeClass("open"),this.$ele.taskInfo.hide()}},{key:"setTaskInfo",value:function(t){this.$ele.taskInfo.find(".header input").val(t.find("span").text())}},{key:"updateTaskTitle",value:function(t){$(".tasks li.open span").text(t)}},{key:"toggleComplete",value:function(t){var e=t.find("i.fa");t.toggleClass("complete"),e.removeClass("fa-check-square fa-square-o"),t.hasClass("complete")?e.addClass("fa-check-square"):e.addClass("fa-square-o")}},{key:"toggleFavorite",value:function(){var t=$(".task-info .favorite"),e=t.find("i"),a=t.find("span");e.hasClass("fa-star-o")?(e.removeClass("fa-star-o").addClass("fa-star"),a.text("お気に入りを解除")):(e.removeClass("fa-star").addClass("fa-star-o"),a.text("お気に入りに追加"))}},{key:"openCategory",value:function(t){$(".category-list li").removeClass("open"),t.addClass("open"),$(".sec-todo-list h1 input").val(t.find("span").text())}},{key:"updateCategoryTitle",value:function(t){$(".category-list li.open span").text(t)}},{key:"addCategory",value:function(){var t=$(".sec-todo-list h1 input");$(".category-list li").removeClass("open"),$(".add-category").before('<li class="open"><div><i class="fa-li fa fa-tasks"></i><span></span></div></li>'),t.val(""),t.focus()}},{key:"removeCategory",value:function(){confirm("カテゴリ「"+$(".category-list li.open span").text()+"」を削除しますか？")}},{key:"openNav",value:function(t){if(this.currentMenu===t)return this.$ele.popupMenu.hide(),void(this.currentMenu="");switch(this.$ele.popupMenu.show(),this.currentMenu=t,t){case".sort":this.$ele.popupMenu.find("h2").text("並べ替え"),this.$ele.popupMenu.find("ul").hide(),this.$ele.popupMenu.find(t).show();break;case".other":this.$ele.popupMenu.find("h2").text("カテゴリメニュー"),this.$ele.popupMenu.find("ul").hide(),this.$ele.popupMenu.find(t).show()}}},{key:"setSort",value:function(t){this.$ele.sortData.show(),this.$ele.sortData.find(".info").text(t.find("span").text()+"に並べ替え済み")}},{key:"toggleSortType",value:function(){$(".sort-data .type i").removeClass("fa-angle-down fa-angle-up"),"desc"===this.sortData.order?(this.sortData.order="asc",$(".sort-data .type i").addClass("fa-angle-up")):(this.sortData.order="desc",$(".sort-data .type i").addClass("fa-angle-down"))}},{key:"disableSort",value:function(){this.$ele.sortData.hide()}}]),t}();a.default=s},{}],2:[function(t,e,a){"use strict";var o=t("./_todo"),n=function(t){return t&&t.__esModule?t:{default:t}}(o);$(document).ready(function(){new n.default})},{"./_todo":1}]},{},[2]);
//# sourceMappingURL=../maps/index.js.map
